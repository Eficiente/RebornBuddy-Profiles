<?xml version="1.0" encoding="utf-8"?>
<!--
####################################################
# Profile: [O] [FSH] Razor Clam - Western Thanalan #
####################################################
# Author: y2krazy                                  #
####################################################
# Version: 1.0.0                                   #
####################################################
# Required Level: 20                               #
####################################################
# Required Teleport Locations:                     #
# 	Horizon                                        #
####################################################
# Required User Interaction:                       #
# 	This profile should be AFKable.                #
####################################################
# Required Setup:                                  #
# 	Acquire Horizon Aetheryte.                     #
# 	Equip Fisher gear set.                         #
# 	Set Rat Tails as your bait.                    #
####################################################
# Item Drops:                                      #
# 	Lominsan Anchovy                               #
# 	Razor Clam                                     #
####################################################
-->

<!-- User Configuration -->
<!DOCTYPE Profile [
  <!ENTITY FishCount "2000"> <!-- Razor Clams to catch before stopping. -->
  <!ENTITY BaitCount "500"> <!-- Rat Tails to maintain in your inventory. -->
]>
<!-- End User Configuration -->

<Profile>
	<Name>[O] [FSH] Razor Clam - Western Thanalan</Name>
	<BehaviorDirectory>../../Quest Behaviors</BehaviorDirectory>
	<KillRadius>90</KillRadius>
	<Order>

		<!-- Razor Clam -->
		<!-- Bait: Rat Tail -->

		<While Condition="True">

		<If Condition="(ItemCount(4884) &lt; &FishCount;)">
			<If Condition="Core.Player.ClassLevel &lt; 20">
				<LogMessage Message="You do not meet the minimum level requirement." />
				<LogMessage Message="Please reach level 20 or higher." />
				<StopBot />
			</If>
			<If Condition="Core.Player.ClassLevel &gt; 19">
				<LogMessage Message="You need more Razor Clams!" />
				<If Condition="not IsOnMap(140)">
					<If Condition="Managers.WorldManager.HasAetheryteId(17)">
						<TeleportTo Name="Horizon" AetheryteId="17" />
					</If>
					<If Condition="not Managers.WorldManager.HasAetheryteId(17)">
						<Travel To="140" />
					</If>
				</If>
				<If Condition="not HasAtLeast(2591,99)">
					<LogMessage Message="You need more Rat Tails!" />
					<NoCombatMoveTo Name="Merchant &amp; Mender" XYZ="-306.508, 18.74717, -147.1123" />
					<BuyItem ItemId="2591" ItemCount="&BaitCount;" DialogOption="1" InteractDistance="3.0" NpcId="1004422" XYZ="-306.508, 18.74717, -147.1123" />
				</If>
				<NoCombatMoveTo Name="Fishing Area" XYZ="-302.6693, 17.84625, -156.7349" />
				<While Condition="IsTimeBetween(0,8)">
					<Fish Mooch="0" Condition="IsTimeBetween(0,8)">
						<FishSpots>
							<FishSpot XYZ="-283.6836, 13.83135, -158.5766" Heading="1.614092" />
							<FishSpot XYZ="-296.8917, 17.12901, -140.8468" Heading="1.042012" />
							<FishSpot XYZ="-324.5534, 13.9835, -113.2246" Heading="1.536292" />
							<FishSpot XYZ="-304.6291, 13.90376, -84.32362" Heading="1.567708" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<While Condition="IsTimeBetween(8,16)">
					<Fish Mooch="0" Condition="IsTimeBetween(8,16)">
						<FishSpots>
							<FishSpot XYZ="-340.2292, 13.90376, -99.97168" Heading="6.251761" />
							<FishSpot XYZ="-335.0887, 13.9835, -115.0191" Heading="5.265019" />
							<FishSpot XYZ="-348.9883, 16.10175, -134.1591" Heading="5.661141" />
							<FishSpot XYZ="-355.9287, 13.90376, -100.0216" Heading="4.724665" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<While Condition="IsTimeBetween(16,24)">
					<Fish Mooch="0" Condition="IsTimeBetween(16,24)">
						<FishSpots>
							<FishSpot XYZ="-329.1225, 13.9835, -79.94449" Heading="4.688356" />
							<FishSpot XYZ="-324.5986, 13.9835, -98.37394" Heading="1.56352" />
							<FishSpot XYZ="-305.7851, 19.01664, -133.3547" Heading="0.4409204" />
							<FishSpot XYZ="-273.95, 13.48067, -150.6381" Heading="1.058765" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<NoCombatMoveTo Name="Merchant &amp; Mender" XYZ="-306.508, 18.74717, -147.1123" />
				<NPCRepair NpcID="1004422" DialogOption="4" />
				<WaitTimer WaitTime="5" />
			</If>
		</If>
		<If Condition="(ItemCount(4884) == &FishCount;) or (ItemCount(4884) &gt; &FishCount;)">
			<LogMessage Message="You've gathered &FishCount;+ Razor Clams!" />
			<If Condition="not IsOnMap(129)">
				<If Condition="Managers.WorldManager.HasAetheryteId(8)">
					<TeleportTo Name="Limsa Lominsa Lower Decks" AetheryteId="8" />
				</If>
				<If Condition="not Managers.WorldManager.HasAetheryteId(8)">
					<Travel To="129" />
				</If>
			</If>
			<StopBot />
		</If>

		</While>

	</Order>
	<CodeChunks>
		<CodeChunk Name="StopFishing">
			<![CDATA[ 
				SpellData data;
				if (Actionmanager.CurrentActions.TryGetValue(299, out data) && Actionmanager.CanCast(data, Core.Me))
				{
					Actionmanager.DoAction(299, Core.Me);
				}
		]]>
		</CodeChunk>
	</CodeChunks>
</Profile>