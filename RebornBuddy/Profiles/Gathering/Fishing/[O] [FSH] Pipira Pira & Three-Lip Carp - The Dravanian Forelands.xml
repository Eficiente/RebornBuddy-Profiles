<?xml version="1.0" encoding="utf-8"?>
<!--
#############################################################################
# Profile: [O] [FSH] Pipira Pira & Three-Lip Carp - The Dravanian Forelands #
#############################################################################
# Author: y2krazy                                                           #
#############################################################################
# Version: 1.0.0                                                            #
#############################################################################
# Required Level: 58                                                        #
#############################################################################
# Required Teleport Locations:                                              #
# 	Anyx Trine or Tailfeather                                               #
# 	Falcon's Nest                                                           #
#############################################################################
# Required User Interaction:                                                #
# 	None                                                                    #
#############################################################################
# Required Setup:                                                           #
# 	Fill out User Configuration below.                                      #
# 	Level 58+ Fisher                                                        #
# 	Set Fisher Gear Set at the bottom of the profile.                       #
#############################################################################
# Item Drops:                                                               #
# 	Dravanian Bass                                                          #
# 	Fanged Clam                                                             #
# 	Lake Urchin                                                             #
# 	Pipira Pira                                                             #
# 	Rock Mussel                                                             #
# 	Three-Lip Carp                                                          #
# 	Whilom Catfish                                                          #
#############################################################################
-->

<!-- User Configuration -->
<!DOCTYPE Profile [
  <!ENTITY PiraCount "2000"> <!-- Pipira Piras to catch before stopping. -->
  <!ENTITY CarpCount "2000"> <!-- Three-Lip Carp to catch before stopping. -->
  <!ENTITY MinFish "15"> <!-- Minimum amount of fish to catch before changing spots. -->
  <!ENTITY MaxFish "25"> <!-- Maximum amount of fish to catch before changing spots -->
  <!ENTITY Sit "True"> <!-- Set this to "True" if you want to sit while fishing. -->
  <!ENTITY ConfirmKey "Numpad0"> <!-- Fishing: "Keybind" > "System" > "Confirm" -->
  <!ENTITY MoveCursorRightKey "Numpad6"> <!-- Fishing: "Keybind" > "System" > "Move Cursor Right" -->
]>
<!-- End User Configuration -->

<Profile>
	<Name>[O] [FSH] Pipira Pira &amp; Three-Lip Carp - The Dravanian Forelands</Name>
	<BehaviorDirectory>../../Quest Behaviors</BehaviorDirectory>
	<KillRadius>90</KillRadius>
	<Order>

		<!-- Pipira Pira -->
		<!-- Three-Lip Carp -->
		<!-- Bait: Goblin Jig -->

		<While Condition="not HasAtLeast(12741,&PiraCount;) and not HasAtLeast(12729,&CarpCount;)">

			<RunCode Name="Fisher" />
			<WaitTimer WaitTime="3" />
			<If Condition="Core.Me.CurrentJob == ClassJobType.Fisher">
				<If Condition="Core.Player.ClassLevel &lt; 58">
					<LogMessage Message="You do not meet the minimum level requirement." />
					<LogMessage Message="Please reach level 58 or higher." />
					<StopBot />
				</If>
				<If Condition="Core.Player.ClassLevel &gt; 57">
					<LogMessage Message="You need more Pipira Piras and/or Three-Lip Carp!" />
					<If Condition="not HasAtLeast(12706,1)">
						<LogMessage Message="You need more Goblin Jigs!" />
						<LogMessage Message="Please purchase some and restart this profile." />
						<StopBot />
					</If>
					<If Condition="not HasAtLeast(12704,1)">
						<LogMessage Message="You need 1 Stonefly Nymph!" />
						<If Condition="not IsOnMap(398)">
							<If Condition="Managers.WorldManager.HasAetheryteId(76)">
								<TeleportTo Name="Tailfeather" AetheryteId="76" />
							</If>
							<If Condition="not Managers.WorldManager.HasAetheryteId(76)">
								<If Condition="Managers.WorldManager.HasAetheryteId(77)">
									<TeleportTo Name="Anyx Trine" AetheryteId="77" />
								</If>
							</If>
							<If Condition="not Managers.WorldManager.HasAetheryteId(77)">
								<Travel To="398" />
							</If>
						</If>
						<NoCombatMoveTo Name="Traveling Merchant" XYZ="475.9136, -51.1414, 45.97534" />
						<BuyItem ItemId="12704" ItemCount="1" DialogOption="1" InteractDistance="3.0" NpcId="1011912" XYZ="475.9136, -51.1414, 45.97534" />
					</If>
					<If Condition="not IsOnMap(398)">
						<If Condition="Managers.WorldManager.HasAetheryteId(76)">
							<TeleportTo Name="Tailfeather" AetheryteId="76" />
						</If>
						<If Condition="not Managers.WorldManager.HasAetheryteId(76)">
							<If Condition="Managers.WorldManager.HasAetheryteId(77)">
								<TeleportTo Name="Anyx Trine" AetheryteId="77" />
							</If>
						</If>
						<If Condition="not Managers.WorldManager.HasAetheryteId(77)">
							<Travel To="398" />
						</If>
					</If>
					<NoCombatMoveTo Name="Fishing Area" XYZ="495.5377, -48.32347, -96.34801" />
					<While Condition="IsTimeBetween(0,8)">
						<Fish Mooch="0" ConfirmKey="&ConfirmKey;" MoveCursorRightKey="&MoveCursorRightKey;" Bait="Goblin Jig" MinFish="&MinFish;" MaxFish="&MaxFish;" ShuffleFishSpots="True" Condition="IsTimeBetween(0,8)">
							<FishSpots>
								<FishSpot XYZ="501.1315, -46.66195, -94.61865" Heading="4.758571" Sit="&Sit;" />
								<FishSpot XYZ="500.7798, -47.33237, -122.4505" Heading="3.925002" Sit="&Sit;" />
								<FishSpot XYZ="508.6219, -44.2114, -150.5673" Heading="5.462289" Sit="&Sit;" />
								<FishSpot XYZ="480.5136, -45.42776, -184.97" Heading="2.695596" Sit="&Sit;" />
							</FishSpots>
						</Fish>
					</While>
					<While Condition="IsTimeBetween(8,16)">
						<Fish Mooch="0" ConfirmKey="&ConfirmKey;" MoveCursorRightKey="&MoveCursorRightKey;" Bait="Goblin Jig" MinFish="&MinFish;" MaxFish="&MaxFish;" ShuffleFishSpots="True" Condition="IsTimeBetween(8,16)">
							<FishSpots>
								<FishSpot XYZ="495.3855, -45.52224, -156.8098" Heading="1.755209" Sit="&Sit;" />
								<FishSpot XYZ="493.3554, -46.65797, -131.2226" Heading="1.260931" Sit="&Sit;" />
								<FishSpot XYZ="489.6021, -47.78767, -117.8523" Heading="1.543676" Sit="&Sit;" />
								<FishSpot XYZ="496.5915, -45.98283, -142.3671" Heading="2.222259" Sit="&Sit;" />
							</FishSpots>
						</Fish>
					</While>
					<While Condition="IsTimeBetween(16,24)">
						<Fish Mooch="0" ConfirmKey="&ConfirmKey;" MoveCursorRightKey="&MoveCursorRightKey;" Bait="Goblin Jig" MinFish="&MinFish;" MaxFish="&MaxFish;" ShuffleFishSpots="True" Condition="IsTimeBetween(16,24)">
							<FishSpots>
								<FishSpot XYZ="483.4444, -47.39961, -169.3208" Heading="2.104974" Sit="&Sit;" />
								<FishSpot XYZ="503.5096, -43.58286, -163.721" Heading="5.032938" Sit="&Sit;" />
								<FishSpot XYZ="505.9837, -46.48515, -136.5426" Heading="4.350164" Sit="&Sit;" />
								<FishSpot XYZ="499.3825, -46.2508, -110.0995" Heading="5.24866" Sit="&Sit;" />
							</FishSpots>
						</Fish>
					</While>
					<If Condition="IsOnMap(398)">
						<NoCombatMoveTo Name="Traveling Mender" XYZ="479.3926, -51.1414, 24.64331" />
						<NPCRepair NpcID="1011913" />
					</If>
					<LogMessage Message="Swapping zones to not scare the fish..." />
					<If Condition="not IsOnMap(397) and not IsOnMap(398)">
						<If Condition="Managers.WorldManager.HasAetheryteId(71)">
							<TeleportTo Name="Falcon's Nest" AetheryteId="71" />
						</If>
						<If Condition="not Managers.WorldManager.HasAetheryteId(71)">
									
							<!-- TO DO -->

							<!-- Update Travel.cs with new zone information.  -->

							<!-- TO DO -->

							<!-- <Travel To="397" /> -->
							<LogMessage Message="Please manually move to Falcon's Nest and restart the profile." />
							<StopBot />
						</If>
					</If>
					<If Condition="IsOnMap(398)">
						<NoCombatMoveTo Name="Coerthas Central Highlands" XYZ="868.3534, -4.027575, 349.3807" />
						<Travel To="397" />
					</If>
					<NoCombatMoveTo Name="Fishing Area" XYZ="-473.1809, 90.99203, -634.5757" />
					<While Condition="IsTimeBetween(0,2)">
						<Fish Mooch="0" ConfirmKey="&ConfirmKey;" MoveCursorRightKey="&MoveCursorRightKey;" Bait="Goblin Jig" ShuffleFishSpots="True" Condition="IsTimeBetween(0,2)">
							<FishSpots>
								<FishSpot XYZ="-471.5414, 90.22385, -648.1004" Heading="3.88593" />
								<FishSpot XYZ="-464.6139, 90.49382, -655.6116" Heading="3.961328" />
								<FishSpot XYZ="-458.4462, 90.05778, -665.2849" Heading="4.0095" />
								<FishSpot XYZ="-448.6599, 90.39497, -671.6024" Heading="3.666018" />
							</FishSpots>
						</Fish>
					</While>
				</If>
			</If>

		</While>

		<LogMessage Message="You've gathered &PiraCount;+ Pipira Piras and &CarpCount;+ Three-Lip Carp!" />
		<If Condition="not IsOnMap(129)">
			<If Condition="Managers.WorldManager.HasAetheryteId(8)">
				<TeleportTo Name="Limsa Lominsa Lower Decks" AetheryteId="8" />
			</If>
			<If Condition="not Managers.WorldManager.HasAetheryteId(8)">
				<Travel To="129" />
			</If>
		</If>

	</Order>
	<GrindAreas>
	</GrindAreas>
	<CodeChunks>
		<CodeChunk Name="Fisher">
			<![CDATA[ 
				ff14bot.Managers.ChatManager.SendChat("/gs change 23");
		]]>
		</CodeChunk>
	</CodeChunks>
</Profile>