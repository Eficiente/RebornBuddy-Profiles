<?xml version="1.0" encoding="utf-8"?>
<!--
########################################################
# Profile: [O] [FSH] Rothlyt Oyster - Western Thanalan #
########################################################
# Author: y2krazy                                      #
########################################################
# Version: 1.0.0                                       #
########################################################
# Required Level: 17                                   #
########################################################
# Required Teleport Locations:                         #
# 	Horizon                                            #
########################################################
# Required User Interaction:                           #
# 	This profile should be AFKable.                    #
########################################################
# Required Setup:                                      #
# 	Acquire Horizon Aetheryte.                         #
# 	Equip Fisher gear set.                             #
# 	Set Rat Tails as your bait.                        #
########################################################
# Item Drops:                                          #
# 	Lominsan Anchovy                                   #
# 	Pebble Crab                                        #
# 	Rothlyt Oyster                                     #
# 	Tiger Cod                                          #
########################################################
-->

<!-- User Configuration -->
<!DOCTYPE Profile [
  <!ENTITY FishCount "2000"> <!-- Rothlyt Oysters to catch before stopping. -->
  <!ENTITY BaitCount "500"> <!-- Rat Tails to maintain in your inventory. -->
]>
<!-- End User Configuration -->

<Profile>
	<Name>[O] [FSH] Rothlyt Oyster - Western Thanalan</Name>
	<BehaviorDirectory>../../Quest Behaviors</BehaviorDirectory>
	<KillRadius>90</KillRadius>
	<Order>

		<!-- Rothlyt Oyster -->
		<!-- Bait: Rat Tail -->

		<While Condition="True">

		<If Condition="(ItemCount(4881) &lt; &FishCount;)">
			<If Condition="Core.Player.ClassLevel &lt; 17">
				<LogMessage Message="You do not meet the minimum level requirement." />
				<LogMessage Message="Please reach level 17 or higher." />
				<StopBot />
			</If>
			<If Condition="Core.Player.ClassLevel &gt; 16">
				<LogMessage Message="You need more Rothlyt Oysters!" />
				<If Condition="not IsOnMap(140)">
					<If Condition="Managers.WorldManager.HasAetheryteId(17)">
						<TeleportTo Name="Horizon" AetheryteId="17" />
					</If>
					<If Condition="not Managers.WorldManager.HasAetheryteId(17)">
						<Travel To="140" />
					</If>
				</If>
				<If Condition="not HasAtLeast(2591,99)">
					<LogMessage Message="You need more Rat Tails!" />
					<NoCombatMoveTo Name="Merchant &amp; Mender" XYZ="-306.508, 18.74717, -147.1123" />
					<BuyItem ItemId="2591" ItemCount="&BaitCount;" DialogOption="1" InteractDistance="3.0" NpcId="1004422" XYZ="-306.508, 18.74717, -147.1123" />
				</If>
				<NoCombatMoveTo Name="Fishing Area" XYZ="-201.3971, 33.16753, 362.9234" />
				<While Condition="IsTimeBetween(0,8)">
					<Fish Mooch="0" Condition="IsTimeBetween(0,8)">
						<FishSpots>
							<FishSpot XYZ="-218.0696, 33.49295, 341.8465" Heading="5.033592" />
							<FishSpot XYZ="-260.0208, 25.81229, 348.6006" Heading="3.378351" />
							<FishSpot XYZ="-271.4582, 23.40284, 340.803" Heading="2.914139" />
							<FishSpot XYZ="-297.5711, 16.1418, 327.0547" Heading="2.849558" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<While Condition="IsTimeBetween(8,16)">
					<Fish Mooch="0" Condition="IsTimeBetween(8,16)">
						<FishSpots>
							<FishSpot XYZ="-299.2144, 13.98368, 307.9089" Heading="1.542656" />
							<FishSpot XYZ="-302.7947, 13.98375, 299.0564" Heading="4.723321" />
							<FishSpot XYZ="-306.1688, 16.3963, 335.1834" Heading="4.880764" />
							<FishSpot XYZ="-303.0483, 13.98375, 312.8394" Heading="4.683891" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<While Condition="IsTimeBetween(16,24)">
					<Fish Mooch="0" Condition="IsTimeBetween(16,24)">
						<FishSpots>
							<FishSpot XYZ="-301.0676, 13.98365, 287.7943" Heading="3.13577" />
							<FishSpot XYZ="-299.4542, 13.98375, 318.3871" Heading="1.551033" />
							<FishSpot XYZ="-286.6027, 19.35003, 339.685" Heading="2.723163" />
							<FishSpot XYZ="-267.3372, 23.8193, 346.1819" Heading="2.518298" />
							<FishSpot XYZ="-220.8921, 31.9663, 352.611" Heading="4.363749" />
						</FishSpots>
					</Fish>
				</While>
				<WaitTimer WaitTime="1" />
				<RunCode Name="StopFishing" />
				<WaitTimer WaitTime="1" />
				<NoCombatMoveTo Name="Merchant &amp; Mender" XYZ="-316.64, 33.27094, 391.9889" />
				<NPCRepair NpcID="1004421" DialogOption="4" />
				<WaitTimer WaitTime="5" />
			</If>
		</If>
		<If Condition="(ItemCount(4881) == &FishCount;) or (ItemCount(4881) &gt; &FishCount;)">
			<LogMessage Message="You've gathered &FishCount;+ Rothlyt Oysters!" />
			<If Condition="not IsOnMap(129)">
				<If Condition="Managers.WorldManager.HasAetheryteId(8)">
					<TeleportTo Name="Limsa Lominsa Lower Decks" AetheryteId="8" />
				</If>
				<If Condition="not Managers.WorldManager.HasAetheryteId(8)">
					<Travel To="129" />
				</If>
			</If>
			<StopBot />
		</If>

		</While>

	</Order>
	<CodeChunks>
		<CodeChunk Name="StopFishing">
			<![CDATA[ 
				SpellData data;
				if (Actionmanager.CurrentActions.TryGetValue(299, out data) && Actionmanager.CanCast(data, Core.Me))
				{
					Actionmanager.DoAction(299, Core.Me);
				}
		]]>
		</CodeChunk>
	</CodeChunks>
</Profile>